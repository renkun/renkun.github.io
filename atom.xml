<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kun Ren</title>
  
  <subtitle>只谈风月</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://kun.ren/"/>
  <updated>2020-03-22T17:45:32.480Z</updated>
  <id>https://kun.ren/</id>
  
  <author>
    <name>Kun Ren</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>疫情下时政分析一</title>
    <link href="https://kun.ren/2020/03/23/%E7%96%AB%E6%83%85%E4%B8%8B%E6%97%B6%E6%94%BF%E5%88%86%E6%9E%90%E4%B8%80/"/>
    <id>https://kun.ren/2020/03/23/%E7%96%AB%E6%83%85%E4%B8%8B%E6%97%B6%E6%94%BF%E5%88%86%E6%9E%90%E4%B8%80/</id>
    <published>2020-03-22T17:44:45.000Z</published>
    <updated>2020-03-22T17:45:32.480Z</updated>
    
    <content type="html"><![CDATA[<p>简单做个预测，纯粹锻炼下逻辑和分析能力。</p><h5 id="关于疫情"><a href="#关于疫情" class="headerlink" title="关于疫情"></a>关于疫情</h5><ul><li><p>4月10号左右意大利达到峰值，之后逐步下降。5月底左右基本实现很少新增。</p></li><li><p>美国峰值估计在4月下旬，美国也会实现指数级爆发，整体数目会超过中国。6月实现控制住。各个州情况不一，目前严重顺序有先有后。</p></li><li><p>澳洲估计马上进入快速爆发期，增速不如美国，但是累计肯定过万。</p></li><li><p>欧洲即便不考虑意大利、西班牙，其他国家也会变成重灾区，峰值会比意大利晚2周左右。</p></li><li><p>奥运会铁定会推迟。</p></li><li><p>越是鸵鸟政策越严重的，疫情后期也会越严重。</p></li><li><p>全球累计超百万（含中国）。</p></li><li><p>明年还会有零星，但是不会大爆发。</p><blockquote><p>以上内容3个月后再来复盘。</p></blockquote></li></ul><h5 id="关于政经"><a href="#关于政经" class="headerlink" title="关于政经"></a>关于政经</h5><ol><li><p>全球化受挫，民族主义与保护主义急剧扩大。</p></li><li><p>美国经济衰退明显，可能需要另外一个4年才能重新进入上升通道。特朗普继续当选，靠的是愚弄和操纵底层，但是感觉下一个任期内不会正常完成。</p></li><li><p>美股还需要再经过1个月左右持续下跌，然后底部稍微靠上位置来回震荡半年甚至一年。国际性金融危机诱发一定范围的经济危机。</p></li><li><p>布油最低在20左右，估计4周内见底，沙特和美国达成协议。</p></li><li><p>欧盟逐步走向貌合神离，作用和价值越来越低，只剩下一些标准协会和组织等还有一定作用。</p></li><li><p>加拿大、澳洲依旧倒向美国，充当马前卒。</p></li><li><p>中美割裂在大选前持续加大，目的是为了转移美国内部矛盾，大选后会稍微缓和，但是美国对中国的压制不会改变。</p></li><li><p>中国和欧洲一些主要国家友好度上升，中国会拉拢一些国家抵抗来自美国的明枪暗箭。</p></li><li><p>中国经济会有阵痛，主要是中小企业和外贸相关的，但是来自内部需求的上升会抵消很大一部分，总体上还是持续上升。虽然会受一些魑魅魍魉的明枪暗箭，总体大国地位更加巩固，短期具备与美国抗衡的实力。</p></li><li><p>世界格局长期会由多极化逐步转向两极化。</p><blockquote><p>以上内容1年后再来复盘</p></blockquote></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单做个预测，纯粹锻炼下逻辑和分析能力。&lt;/p&gt;
&lt;h5 id=&quot;关于疫情&quot;&gt;&lt;a href=&quot;#关于疫情&quot; class=&quot;headerlink&quot; title=&quot;关于疫情&quot;&gt;&lt;/a&gt;关于疫情&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;4月10号左右意大利达到峰值，之后逐步下降。5月底左右基本实现很少新增。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;美国峰值估计在4月下旬，美国也会实现指数级爆发，整体数目会超过中国。6月实现控制住。各个州情况不一，目前严重顺序有先有后。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;澳洲估计马上进入快速爆发期，增速不如美国，但是累计肯定过万。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;欧洲即便不考虑意大利、西班牙，其他国家也会变成重灾区，峰值会比意大利晚2周左右。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;奥运会铁定会推迟。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;越是鸵鸟政策越严重的，疫情后期也会越严重。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;全球累计超百万（含中国）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;明年还会有零星，但是不会大爆发。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以上内容3个月后再来复盘。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;关于政经&quot;&gt;&lt;a href=&quot;#关于政经&quot; class=&quot;headerlink&quot; title=&quot;关于政经&quot;&gt;&lt;/a&gt;关于政经&lt;/h5&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;全球化受挫，民族主义与保护主义急剧扩大。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;美国经济衰退明显，可能需要另外一个4年才能重新进入上升通道。特朗普继续当选，靠的是愚弄和操纵底层，但是感觉下一个任期内不会正常完成。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;美股还需要再经过1个月左右持续下跌，然后底部稍微靠上位置来回震荡半年甚至一年。国际性金融危机诱发一定范围的经济危机。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;布油最低在20左右，估计4周内见底，沙特和美国达成协议。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;欧盟逐步走向貌合神离，作用和价值越来越低，只剩下一些标准协会和组织等还有一定作用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;加拿大、澳洲依旧倒向美国，充当马前卒。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;中美割裂在大选前持续加大，目的是为了转移美国内部矛盾，大选后会稍微缓和，但是美国对中国的压制不会改变。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;中国和欧洲一些主要国家友好度上升，中国会拉拢一些国家抵抗来自美国的明枪暗箭。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;中国经济会有阵痛，主要是中小企业和外贸相关的，但是来自内部需求的上升会抵消很大一部分，总体上还是持续上升。虽然会受一些魑魅魍魉的明枪暗箭，总体大国地位更加巩固，短期具备与美国抗衡的实力。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;世界格局长期会由多极化逐步转向两极化。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;以上内容1年后再来复盘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;

    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>新基建是新冠经济危机的解药？</title>
    <link href="https://kun.ren/2020/03/09/%E6%96%B0%E5%9F%BA%E5%BB%BA%E6%98%AF%E6%96%B0%E5%86%A0%E7%BB%8F%E6%B5%8E%E5%8D%B1%E6%9C%BA%E7%9A%84%E8%A7%A3%E8%8D%AF%EF%BC%9F/"/>
    <id>https://kun.ren/2020/03/09/%E6%96%B0%E5%9F%BA%E5%BB%BA%E6%98%AF%E6%96%B0%E5%86%A0%E7%BB%8F%E6%B5%8E%E5%8D%B1%E6%9C%BA%E7%9A%84%E8%A7%A3%E8%8D%AF%EF%BC%9F/</id>
    <published>2020-03-08T17:20:32.000Z</published>
    <updated>2020-03-09T18:53:39.438Z</updated>
    
    <content type="html"><![CDATA[<hr><p>趁着等待编译ffmpeg完成的过程，瞎写一篇。</p><hr><p>多年以后，你躺在摇椅里面摇着蒲扇时候，准会向你的儿孙讲起那个的疫情肆虐之时，沙特发起石油战的下午……</p><h4 id="观点"><a href="#观点" class="headerlink" title="观点"></a>观点</h4><p>是解药。但是是药三分毒，关键看怎么吃，吃多少，吃药的过程中能否做过实时准确把脉。</p><ul><li>如果掌控得当，则解决当前困境，同时中国发展能上一个台阶。有少部分平民在此过程比较失落。</li><li>如果药剂不准，则是空欢喜一场，几年之后徒留骂名。</li><li>如果药方失准，且剂量太猛，则损坏多数人利益和希望，可能会有动荡。</li></ul><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>中国和平快速发展了40多年，很多人都会把一切都会越来越好的美好希望当成理所当然。<br>不过现实总会冷不丁地泼凉水，遇到了一杯、一盆、一桶凉水之后，人们总觉得不会有更糟糕的了吧，然而……可能来了洪水。</p><h5 id="国内经济环境"><a href="#国内经济环境" class="headerlink" title="国内经济环境"></a>国内经济环境</h5><p>2019受贸易战影响，以及前几年创业与投资泡沫烂尾的影响，国内经济已经非常低迷，很多行业和企业都无法高歌猛进，都是在解决困难，寻找突破。</p><p>疫情造成的影响更是雪上加霜。贸易战影响的是信心，疫情造成的影响是直接的经营和现金流问题。紧缩支出，同时具备传导效应，造成企业的上下游整体的影响，而不只是疫情期间的影响，经济活跃度会长久更加低迷。</p><h5 id="国际环境"><a href="#国际环境" class="headerlink" title="国际环境"></a>国际环境</h5><p>特朗普上任之后以一己之力，四处开火，全面改变了国际局势。以前公认的趋向深度国际化概念，都被地缘政治所替代。”地球村“概念转向各自构筑一个个的小城堡。国际协作和分工的趋势，逐步转向了赤裸裸的竞争、压制、制裁。</p><p>疫情更加促进了国与国之间的割裂。人口流通不畅，贸易受阻，民族主义抬头，经济前景不明。<br>今日油价大跌，美股熔断，直接原因是沙特想拉俄罗斯下水失败故意破罐子破摔，根本原因是国际局势的竞争远大于合作造成的割裂。</p><h5 id="政策形势"><a href="#政策形势" class="headerlink" title="政策形势"></a>政策形势</h5><p>地方财政与债务问题早已非常突出，土地财政落空之后，国内税改让地方政府更是缺闲钱，支远大于收。中央掌控财权，短时间对地方政府的借贷度日因地制宜听之任之，长期来说肯定要做一定政策和方向上的统一管控，纳入整体规划中。</p><h5 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h5><p>目前各地政府在疫情期间，对企业实施了一些保护性的政策，旨在保稳定、促就业。但是杯水车薪，无助于整体局面的改变。</p><p><strong>要避免紧缩，避免滞涨，最直接手段就是刺激政策。</strong></p><p>2009年的刺激是基建，四万亿加上各级政府的循环借贷，整体上是解决了金融危机可能带来的风险，通胀受益者颇多，如地方政府、金融机构、地产行业、建筑业、炒房团，还有IT业（拜延后几年的热钱余波所赐，IT产业红红火火），甚至还有没有存款的农民工（农民工资此时有了大幅提高，如若本身就没有多少存款没有被稀释，则后来几年都算是得利）。然而苦闷的是没有赶上车的夹心层，同时产业结构没有及时调整造成的隐患还在，这十年内只能不断修补。</p><p>放水太少意义不大，放水太多又很危险。因此得找一个能承纳很多水的行业，基建能承受很多，但是这药已经不灵。<br>因此，新基建应运而生。</p><h4 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h4><h5 id="谁来买单？"><a href="#谁来买单？" class="headerlink" title="谁来买单？"></a>谁来买单？</h5><p>人民币没法像美元那样可以全球稀释，当然是人民来买单。</p><h5 id="谁会受益？"><a href="#谁会受益？" class="headerlink" title="谁会受益？"></a>谁会受益？</h5><p>地方政府、大型国企、金融机构、电力、高新技术行业（工业物联网肯定大发力）。当然受益也是有吃撑的，还有吃不饱的。</p><h5 id="哪里是蓄水池？"><a href="#哪里是蓄水池？" class="headerlink" title="哪里是蓄水池？"></a>哪里是蓄水池？</h5><p>房地产可能会波及一些能吸收一些水分，但是不会像过去那样能蓄积那么多的水分，避免大通胀了。<br>高新技术行业本身能吸水，但是也能很快放出水，掌控起来比房地产难多了。感觉将来几年CPI会上一个台阶了。</p><h4 id="预测"><a href="#预测" class="headerlink" title="预测"></a>预测</h4><ul><li>国企中形成若干巨头。</li><li>若干行业带来质变，具备非常大的机会，会有一些寡头企业。</li><li>普通白领如若不努力向上、改变自我，则机会越来越少，越来越边缘化。</li><li>最大的问题，可能是旧一代农民和新一代农民。沾不上红利，并且人口基数庞大。</li></ul><h4 id="个人怎么办？"><a href="#个人怎么办？" class="headerlink" title="个人怎么办？"></a>个人怎么办？</h4><p>鸡汤——该干什么就干什么。最好的投资是自己，对于99%的人来说，丰富自己的能力所获得的成就，远大于自己那点小钱瞎投资。</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;趁着等待编译ffmpeg完成的过程，瞎写一篇。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;多年以后，你躺在摇椅里面摇着蒲扇时候，准会向你的儿孙讲起那个的疫情肆虐之时，沙特发起石油战的下午……&lt;/p&gt;
&lt;h4 id=&quot;观点&quot;&gt;&lt;a href=&quot;#观点&quot; class=&quot;headerlink&quot; title=&quot;观点&quot;&gt;&lt;/a&gt;观点&lt;/h4&gt;&lt;p&gt;是解药。但是是药三分毒，关键看怎么吃，吃多少，吃药的过程中能否做过实时准确把脉。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;如果掌控得当，则解决当前困境，同时中国发展能上一个台阶。有少部分平民在此过程比较失落。&lt;/li&gt;
&lt;li&gt;如果药剂不准，则是空欢喜一场，几年之后徒留骂名。&lt;/li&gt;
&lt;li&gt;如果药方失准，且剂量太猛，则损坏多数人利益和希望，可能会有动荡。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;分析&quot;&gt;&lt;a href=&quot;#分析&quot; class=&quot;headerlink&quot; title=&quot;分析&quot;&gt;&lt;/a&gt;分析&lt;/h4&gt;&lt;p&gt;中国和平快速发展了40多年，很多人都会把一切都会越来越好的美好希望当成理所当然。&lt;br&gt;不过现实总会冷不丁地泼凉水，遇到了一杯、一盆、一桶凉水之后，人们总觉得不会有更糟糕的了吧，然而……可能来了洪水。&lt;/p&gt;
&lt;h5 id=&quot;国内经济环境&quot;&gt;&lt;a href=&quot;#国内经济环境&quot; class=&quot;headerlink&quot; title=&quot;国内经济环境&quot;&gt;&lt;/a&gt;国内经济环境&lt;/h5&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>SCRUM in Telecommuting &amp; Offshore Works</title>
    <link href="https://kun.ren/2020/03/08/SCRUM-in-Telecommuting-Offshore-Works/"/>
    <id>https://kun.ren/2020/03/08/SCRUM-in-Telecommuting-Offshore-Works/</id>
    <published>2020-03-07T17:55:40.000Z</published>
    <updated>2020-03-07T18:17:49.858Z</updated>
    
    <content type="html"><![CDATA[<p>在远程办公过程中怎么实践SCRUM</p><h3 id="PDF-版本"><a href="#PDF-版本" class="headerlink" title="PDF 版本"></a>PDF 版本</h3><div class="row">    <embed src="./uploads/SCRUM%20in%20Telecommuting%20&amp;%20Offshore%20Works.pdf" width="100%" height="550" type="application/pdf"></div><hr><h3 id="视频版本"><a href="#视频版本" class="headerlink" title="视频版本"></a>视频版本</h3><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"theme":"#FADFA3","video":{"url":"./uploads/SCRUM%20in%20Telecommuting%20&%20Offshore%20Works.m4v"},"danmaku":{"api":"http://dplayer.daoapp.io","token":"none"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在远程办公过程中怎么实践SCRUM&lt;/p&gt;
&lt;h3 id=&quot;PDF-版本&quot;&gt;&lt;a href=&quot;#PDF-版本&quot; class=&quot;headerlink&quot; title=&quot;PDF 版本&quot;&gt;&lt;/a&gt;PDF 版本&lt;/h3&gt;

	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;./uploads/SCRUM%20in%20Telecommuting%20&amp;amp;%20Offshore%20Works.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
	&lt;/div&gt;




&lt;hr&gt;
&lt;h3 id=&quot;视频版本&quot;&gt;&lt;a href=&quot;#视频版本&quot; class=&quot;headerlink&quot; title=&quot;视频版本&quot;&gt;&lt;/a&gt;视频版本&lt;/h3&gt;&lt;div id=&quot;dplayer0&quot; class=&quot;dplayer hexo-tag-dplayer-mark&quot; style=&quot;margin-bottom: 20px;&quot;&gt;&lt;/div&gt;&lt;script&gt;(function(){var player = new DPlayer({&quot;container&quot;:document.getElementById(&quot;dplayer0&quot;),&quot;theme&quot;:&quot;#FADFA3&quot;,&quot;video&quot;:{&quot;url&quot;:&quot;./uploads/SCRUM%20in%20Telecommuting%20&amp;%20Offshore%20Works.m4v&quot;},&quot;danmaku&quot;:{&quot;api&quot;:&quot;http://dplayer.daoapp.io&quot;,&quot;token&quot;:&quot;none&quot;}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()&lt;/script&gt;

    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>假装下江南</title>
    <link href="https://kun.ren/2020/03/03/%E5%81%87%E8%A3%85%E4%B8%8B%E6%B1%9F%E5%8D%97/"/>
    <id>https://kun.ren/2020/03/03/%E5%81%87%E8%A3%85%E4%B8%8B%E6%B1%9F%E5%8D%97/</id>
    <published>2020-03-02T17:59:17.000Z</published>
    <updated>2020-03-02T18:08:59.873Z</updated>
    
    <content type="html"><![CDATA[<p>天翻地覆慨而慷，<br>整天在家憋得慌。<br>春来江水绿如蓝，<br>假装下江南。</p><p><img src="/images/pasted-1.png" alt="upload successful"></p><p><img src="/images/pasted-2.png" alt="upload successful"></p><p><img src="/images/pasted-3.png" alt="upload successful"></p><p><img src="/images/pasted-4.png" alt="upload successful"></p><p><img src="/images/pasted-5.png" alt="upload successful"></p><p><img src="/images/pasted-6.png" alt="upload successful"></p><p><img src="/images/pasted-7.png" alt="upload successful"></p><p><img src="/images/pasted-8.png" alt="upload successful"></p><p><img src="/images/pasted-9.png" alt="upload successful"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;天翻地覆慨而慷，&lt;br&gt;整天在家憋得慌。&lt;br&gt;春来江水绿如蓝，&lt;br&gt;假装下江南。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-1.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-2.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-3.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-4.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-5.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-6.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-7.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-8.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/pasted-9.png&quot; alt=&quot;upload successful&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>使用JS收发BLE蓝牙串口数据</title>
    <link href="https://kun.ren/2020/03/03/send-receive-ble-serial-data-in-javascript/"/>
    <id>https://kun.ren/2020/03/03/send-receive-ble-serial-data-in-javascript/</id>
    <published>2020-03-02T17:26:51.000Z</published>
    <updated>2020-03-02T18:23:09.684Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><p>使用BLE的透传方式通过手机端收发数据。协议定义的是AT指令。本文主要是来阐述下怎么进行数据转换，并且发送出去。</p><h4 id="Data-Progress-for-Sending"><a href="#Data-Progress-for-Sending" class="headerlink" title="Data Progress for Sending"></a>Data Progress for Sending</h4><p>命令内容本身是字符串，如：<code>AT+STATUS?</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> command = <span class="string">'AT+STATUS'</span>;</span><br></pre></td></tr></table></figure><p>发送命令需要以换行符结尾，根据设备确定，一般是以<code>\r\n</code>结尾。需要在命令后加上。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> suffix = <span class="string">"\r\n"</span>;</span><br><span class="line"><span class="keyword">let</span> sendData = command + suffix;</span><br></pre></td></tr></table></figure><p>生成一个和命令长度一样的的数组buffer，转换成DataView。然后针对每一个字符转换成uint8（类似C中的unsinged char）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buffer = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(sendData.length);</span><br><span class="line"><span class="keyword">let</span> dataView = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; sendData.length; i++) &#123;</span><br><span class="line">  dataView.setUint8(i, sendData.charAt(i).charCodeAt());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后使用writeBLECharacteristicValue将buffer发送出去</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">writeBLECharacteristicValue(&#123;</span><br><span class="line">    <span class="comment">// 这里的 deviceId 需要已经通过 createBLEConnection 与对应设备建立链接</span></span><br><span class="line">    deviceId,</span><br><span class="line">    <span class="comment">// 这里的 serviceId 需要在 getBLEDeviceServices 接口中获取</span></span><br><span class="line">    serviceId,</span><br><span class="line">    <span class="comment">// 这里的 characteristicId 需要在 getBLEDeviceCharacteristics 接口中获取</span></span><br><span class="line">    characteristicId,</span><br><span class="line">    value: buffer,<span class="comment">// hexStringToArrayBuffer('123456'),</span></span><br><span class="line">    success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'写入设备数据值成功'</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">      <span class="comment">// 启用通知接口，以便收到设备推送数据</span></span><br><span class="line">      <span class="keyword">this</span>.notifyBLECharacteristicValueChange();</span><br><span class="line">      resolve(res);</span><br><span class="line">    &#125;,</span><br><span class="line">    fail(e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'写入设备数据值失败，错误码：'</span> + e.errCode);</span><br><span class="line">      <span class="keyword">if</span> (e.errCode !== <span class="number">0</span>) &#123;</span><br><span class="line">        toast(<span class="string">"ERROR CODE:"</span> + e.errCode);</span><br><span class="line">      &#125;</span><br><span class="line">      reject(e.errCode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="Receiving-data"><a href="#Receiving-data" class="headerlink" title="Receiving data"></a>Receiving data</h4><p>BLE收到数据是在<code>onBLECharacteristicValueChange</code>收到的。但是每收到一个字符就会被通知一次。</p><p>收到的命令都是预先定义好的，一般都是以<code>\r\n</code>结尾。故以此作为收到一条完整命令结束的依据。</p><p> this.received 作为收到数据的暂存包</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">onBLECharacteristicValueChange(<span class="function"><span class="params">characteristic</span> =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// 将收到的字符暂存</span></span><br><span class="line">  <span class="keyword">this</span>.received += ab2str(characteristic.value);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(characteristic));</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.received));</span><br><span class="line">  <span class="comment">// 在另外一个函数里单独处理</span></span><br><span class="line">  <span class="keyword">this</span>.onReceivedChar();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在类中定义接收处理方法如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this.receiveSuffix = "\r\n";</span></span><br><span class="line">onReceivedChar() &#123;</span><br><span class="line">  <span class="keyword">let</span> len = <span class="keyword">this</span>.receiveSuffix.length;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.received.substr(<span class="number">0</span> - len) === <span class="keyword">this</span>.receiveSuffix) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'RECV:'</span> + <span class="keyword">this</span>.received);</span><br><span class="line">    <span class="keyword">let</span> command = <span class="keyword">this</span>.received.substr(<span class="number">0</span>, <span class="keyword">this</span>.received.length - len);</span><br><span class="line">    <span class="keyword">this</span>.$emit(<span class="string">'receive'</span>, command);</span><br><span class="line">    <span class="keyword">this</span>.received = <span class="string">''</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>这样在外层收到receive事件时候就是一条完整返回结果</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">onReceive(res) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(res));</span><br><span class="line">  <span class="keyword">let</span> isOK = res.substr(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">let</span> pos = res.indexOf(<span class="string">':'</span>);</span><br><span class="line">  <span class="keyword">if</span> (isOK === <span class="string">"OK"</span> &amp;&amp; pos &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> type = res.substring(<span class="number">3</span>, pos);</span><br><span class="line">    <span class="keyword">let</span> params = res.substr(pos + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> func = <span class="string">"onGet"</span> + type;</span><br><span class="line">    <span class="keyword">this</span>[func](params);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">onGetSTATUS(params) &#123;</span><br><span class="line">  <span class="keyword">let</span> values = params.split(<span class="string">','</span>);</span><br><span class="line">  <span class="keyword">this</span>.powerPercent = values[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">this</span>.temperatura = values[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">this</span>.isActive = (values.length &lt; <span class="number">3</span> || values[<span class="number">2</span>] == <span class="string">'0'</span>) ? <span class="literal">false</span> : <span class="literal">true</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>数据解析完毕，可以按照常规变量使用</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Summary&quot;&gt;&lt;a href=&quot;#Summary&quot; class=&quot;headerlink&quot; title=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h4&gt;&lt;p&gt;使用BLE的透传方式通过手机端收发数据。协议定义的是AT指令。本文主要是来阐述下怎么进行数据转换，并且发送出去。&lt;/p&gt;
&lt;h4 id=&quot;Data-Progress-for-Sending&quot;&gt;&lt;a href=&quot;#Data-Progress-for-Sending&quot; class=&quot;headerlink&quot; title=&quot;Data Progress for Sending&quot;&gt;&lt;/a&gt;Data Progress for Sending&lt;/h4&gt;&lt;p&gt;命令内容本身是字符串，如：&lt;code&gt;AT+STATUS?&lt;/code&gt;。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; command = &lt;span class=&quot;string&quot;&gt;&#39;AT+STATUS&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;发送命令需要以换行符结尾，根据设备确定，一般是以&lt;code&gt;\r\n&lt;/code&gt;结尾。需要在命令后加上。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; suffix = &lt;span class=&quot;string&quot;&gt;&quot;\r\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sendData = command + suffix;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;生成一个和命令长度一样的的数组buffer，转换成DataView。然后针对每一个字符转换成uint8（类似C中的unsinged char）&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; buffer = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;ArrayBuffer&lt;/span&gt;(sendData.length);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; dataView = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;DataView&lt;/span&gt;(buffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; sendData.length; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  dataView.setUint8(i, sendData.charAt(i).charCodeAt());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;然后使用writeBLECharacteristicValue将buffer发送出去&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>解决Ubuntu下磁盘无法写入问题</title>
    <link href="https://kun.ren/2020/02/27/%E8%A7%A3%E5%86%B3Ubuntu%E4%B8%8B%E7%A3%81%E7%9B%98%E6%97%A0%E6%B3%95%E5%86%99%E5%85%A5%E9%97%AE%E9%A2%98/"/>
    <id>https://kun.ren/2020/02/27/%E8%A7%A3%E5%86%B3Ubuntu%E4%B8%8B%E7%A3%81%E7%9B%98%E6%97%A0%E6%B3%95%E5%86%99%E5%85%A5%E9%97%AE%E9%A2%98/</id>
    <published>2020-02-27T06:57:27.000Z</published>
    <updated>2020-03-02T18:21:57.063Z</updated>
    
    <content type="html"><![CDATA[<h4 id="症状"><a href="#症状" class="headerlink" title="症状"></a>症状</h4><p>服务器上运行的程序报错，查询运行日志提示写入磁盘失败。<br>删除了一些日志、临时文件等，短时间运行成功，但是过一阵子又出问题了。</p><h4 id="排查过程"><a href="#排查过程" class="headerlink" title="排查过程"></a>排查过程</h4><p>运行df命令发现磁盘占用不多，很奇怪。。。折腾好久。。。只能临时不定时删除一些文件<br>搜索时候，有人提到磁盘满，一个是磁盘空间慢，一个是磁盘inodes索引满。<br><strong>运行命令</strong> <code>df -i</code> <strong>果然发现inodes占用100%</strong></p><p>如下是结局问题记录：</p><ol><li><p>感觉是哪个程序运行产生日志或者临时文件比较多，所以需要去找到底哪里文件比较多</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> i <span class="keyword">in</span> /*; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sudo find <span class="variable">$i</span> | wc -l; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure></li><li><p>发现/var目录下100多万个文件，找下一个多的目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> i <span class="keyword">in</span> /var/*; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sudo find <span class="variable">$i</span> | wc -l; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure></li><li><p>发现spool目录下文件多</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> i <span class="keyword">in</span> /var/spool/*; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sudo find <span class="variable">$i</span> | wc -l; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure></li><li><p>发现postfix下文件多，然后一看就知道是postfix搞得鬼，defer, deferred, maildrop下 100多万文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> i <span class="keyword">in</span> /var/spool/postfix/*; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sudo find <span class="variable">$i</span> | wc -l; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure></li><li><p>先删除这些文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo find /var/spool/postfix/defer/ -<span class="built_in">type</span> f |xargs sudo rm -rf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo find /var/spool/postfix/deferred/ -<span class="built_in">type</span> f |xargs sudo rm -rf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo find /var/spool/postfix/maildrop/ -<span class="built_in">type</span> f |xargs sudo rm -rf</span></span><br></pre></td></tr></table></figure></li></ol><p>或者直接删除目录, 删除之前需要停止postfix</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo service postfix stop </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo rm -rf /var/spool/postfix/defer</span></span><br></pre></td></tr></table></figure><p>再运行发现文件减少了很多</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="keyword">for</span> i <span class="keyword">in</span> /var/spool/postfix/*; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$i</span>;sudo find <span class="variable">$i</span> | wc -l; <span class="keyword">done</span></span></span><br></pre></td></tr></table></figure><h4 id="解决根源问题"><a href="#解决根源问题" class="headerlink" title="解决根源问题"></a>解决根源问题</h4><p>到底是哪里的问题产生的文件呢？？？网上一般说是和crontab有关</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vi /etc/crontab</span></span><br></pre></td></tr></table></figure><p>是系统默认的，无异议。<br>运行ubuntu 帐号下的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> crontab -e</span></span><br></pre></td></tr></table></figure><p>发现了很多bash命令，没有输出，造成了很多mail输出问题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * /home/ubuntu/vr/bin/kill_closeWait.sh</span><br></pre></td></tr></table></figure><p>应该是</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * /home/ubuntu/vr/bin/kill_closeWait.sh &gt;/dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;症状&quot;&gt;&lt;a href=&quot;#症状&quot; class=&quot;headerlink&quot; title=&quot;症状&quot;&gt;&lt;/a&gt;症状&lt;/h4&gt;&lt;p&gt;服务器上运行的程序报错，查询运行日志提示写入磁盘失败。&lt;br&gt;删除了一些日志、临时文件等，短时间运行成功，但是过一阵子又出问题了。&lt;/p&gt;
&lt;h4 id=&quot;排查过程&quot;&gt;&lt;a href=&quot;#排查过程&quot; class=&quot;headerlink&quot; title=&quot;排查过程&quot;&gt;&lt;/a&gt;排查过程&lt;/h4&gt;&lt;p&gt;运行df命令发现磁盘占用不多，很奇怪。。。折腾好久。。。只能临时不定时删除一些文件&lt;br&gt;搜索时候，有人提到磁盘满，一个是磁盘空间慢，一个是磁盘inodes索引满。&lt;br&gt;&lt;strong&gt;运行命令&lt;/strong&gt; &lt;code&gt;df -i&lt;/code&gt; &lt;strong&gt;果然发现inodes占用100%&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如下是结局问题记录：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;感觉是哪个程序运行产生日志或者临时文件比较多，所以需要去找到底哪里文件比较多&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /*; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;;sudo find &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | wc -l; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;发现/var目录下100多万个文件，找下一个多的目录&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/*; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;;sudo find &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | wc -l; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;发现spool目录下文件多&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/*; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;;sudo find &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | wc -l; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;发现postfix下文件多，然后一看就知道是postfix搞得鬼，defer, deferred, maildrop下 100多万文件。&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/postfix/*; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;;sudo find &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | wc -l; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;先删除这些文件&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo find /var/spool/postfix/defer/ -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; f |xargs sudo rm -rf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo find /var/spool/postfix/deferred/ -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; f |xargs sudo rm -rf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo find /var/spool/postfix/maildrop/ -&lt;span class=&quot;built_in&quot;&gt;type&lt;/span&gt; f |xargs sudo rm -rf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;或者直接删除目录, 删除之前需要停止postfix&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo service postfix stop &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; sudo rm -rf /var/spool/postfix/defer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;再运行发现文件减少了很多&lt;/p&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;bash&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; /var/spool/postfix/*; &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt;;sudo find &lt;span class=&quot;variable&quot;&gt;$i&lt;/span&gt; | wc -l; &lt;span class=&quot;keyword&quot;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://kun.ren/2020/02/26/hello-world/"/>
    <id>https://kun.ren/2020/02/26/hello-world/</id>
    <published>2020-02-25T16:33:26.000Z</published>
    <updated>2020-03-02T18:22:42.304Z</updated>
    
    <content type="html"><![CDATA[<h4 id="二月初三：晴而无云"><a href="#二月初三：晴而无云" class="headerlink" title="二月初三：晴而无云"></a>二月初三：晴而无云</h4><p>天略热燥，须再松动琴弦。然一曲未完，便有电话呼唤。须臾之间，又有消息若干。一日下来，代码未几，文档亦未成篇。正月已过，恍然思绪万千。消逝年华，回首徒留遗憾。</p><p>万里悲秋常作客，沧桑浮云一瞬间。决计写些什么，聊以慰藉惨淡人生。</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;二月初三：晴而无云&quot;&gt;&lt;a href=&quot;#二月初三：晴而无云&quot; class=&quot;headerlink&quot; title=&quot;二月初三：晴而无云&quot;&gt;&lt;/a&gt;二月初三：晴而无云&lt;/h4&gt;&lt;p&gt;天略热燥，须再松动琴弦。然一曲未完，便有电话呼唤。须臾之间，又有消息若干。一日下来，代码未几，文档亦未成篇。正月已过，恍然思绪万千。消逝年华，回首徒留遗憾。&lt;/p&gt;
&lt;p&gt;万里悲秋常作客，沧桑浮云一瞬间。决计写些什么，聊以慰藉惨淡人生。&lt;/p&gt;

    
    </summary>
    
    
    
  </entry>
  
</feed>
